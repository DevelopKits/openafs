# Copyright 2000, International Business Machines Corporation and others.
# All Rights Reserved.
# 
# This software has been released under the terms of the IBM Public
# License.  For details, see the LICENSE file in the top-level source
# directory or online at http://www.openafs.org/dl/license10.html
#
# Portions Copyright (c) 2003 Apple Computer, Inc.
# Portions Copyright (c) 2006-2007 Sine Nomine Associates

srcdir=@srcdir@
include @TOP_OBJDIR@/src/config/Makefile.config

CC=${MT_CC}
CFLAGS=${COMMON_CFLAGS} -I.. -DNINTERFACE ${MT_CFLAGS} -DRXDEBUG

CCRULE=${CC} ${CFLAGS} -c $? -o $@

OBJS = \
	$(NULL)

objects= ${OBJS}

PROGS = \
	cpu \
	lib_init \
	list \
	mem_object_cache \
	thread_event \
	$(NULL)

LIBS= \
	${TOP_LIBDIR}/libosi-pthread-ni.a \
	$(NULL)


all: \
	depinstall \
	${objects} \
	$(PROGS) \
	$(NULL)

depinstall:

install:

dest:

cpu.o: cpu.c
	${CCRULE}

lib_init.o: lib_init.c
	${CCRULE}

list.o: list.c
	${CCRULE}

mem_object_cache.o: mem_object_cache.c
	${CCRULE}

thread_event.o: thread_event.c
	${CCRULE}

cpu: cpu.o
	${CC} ${LDFLAGS} -o $@ $? ${LIBS} ${MT_LIBS} ${XLIBS}

lib_init: lib_init.o
	${CC} ${LDFLAGS} -o $@ $? ${LIBS} ${MT_LIBS} ${XLIBS}

list: list.o
	${CC} ${LDFLAGS} -o $@ $? ${LIBS} ${MT_LIBS} ${XLIBS}

mem_object_cache: mem_object_cache.o
	${CC} ${LDFLAGS} -o $@ $? ${LIBS} ${MT_LIBS} ${XLIBS}

thread_event: thread_event.o
	${CC} ${LDFLAGS} -o $@ $? ${LIBS} ${MT_LIBS} ${XLIBS}


clean:
	$(RM) -f *.o core $(PROGS)

include @TOP_OBJDIR@/src/config/Makefile.version


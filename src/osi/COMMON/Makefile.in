# Copyright 2000, International Business Machines Corporation and others.
# All Rights Reserved.
# 
# This software has been released under the terms of the IBM Public
# License.  For details, see the LICENSE file in the top-level source
# directory or online at http://www.openafs.org/dl/license10.html
#
# Portions Copyright (c) 2003 Apple Computer, Inc.
# Portions Copyright (c) 2006-2007 Sine Nomine Associates

srcdir=@srcdir@
include @TOP_OBJDIR@/src/config/Makefile.config

PUBLICHEADERS = \
	atomic.h \
	cache.h \
	condvar_options.h \
	counter.h \
	counter_inline.h \
	demux.h \
	demux_impl.h \
	demux_options.h \
	demux_types.h \
	event.h \
	event_lock.h \
	event_types.h \
	kcopy.h \
	ksyscall.h \
	ksysincludes.h \
	kutil.h \
	libosi_options.h \
	mem_local.h \
	mem_local_inline.h \
	mem_local_types.h \
	mutex_options.h \
	object_cache.h \
	object_cache_impl.h \
	object_cache_impl_types.h \
	object_cache_types.h \
	object_cache_options.h \
	object_init.h \
	object_init_inline.h \
	options.h \
	proc.h \
	refcnt.h \
	refcnt_inline.h \
	rwlock_options.h \
	shlock_options.h \
	spin_rwlock_options.h \
	spinlock_options.h \
	stats_impl.h \
	string.h \
	syscall.h \
	thread.h \
	thread_bind.h \
	thread_event.h \
	thread_event_impl.h \
	thread_event_inline.h \
	thread_option.h \
	time.h \
	time_approx.h \
	ucopy.h \
	uproc.h \
	uproc_inline.h \
	usyscall.h \
	usyscall_impl.h \
	usysincludes.h \
	util.h \
	uutil.h \
	var_args.h \
	$(NULL)

DEPINSTALL_HDR_DIR=${TOP_INCDIR}/osi/COMMON
INSTALL_HDR_DIR=${DESTDIR}${includedir}/osi/COMMON
DEST_HDR_DIR=${DEST}/include/osi/COMMON
include @TOP_OBJDIR@/src/config/Makefile.public-header

RECURSE_DIRS= \
	data \
	$(NULL)

include @TOP_OBJDIR@/src/config/Makefile.recurse

all:	\
	depinstall \
	build_recurse \
	$(NULL)

depinstall: \
	depinstall_hdrs \
	depinstall_recurse \
	$(NULL)

#
# Installation targets
#
install: \
	install_hdrs \
	install_recurse \
	$(NULL)

dest: \
	dest_hdrs \
	dest_recurse \
	$(NULL)

#
# Misc. targets
#
clean: clean_recurse
